(function(t){function e(e){for(var a,i,o=e[0],l=e[1],u=e[2],f=0,d=[];f<o.length;f++)i=o[f],s[i]&&d.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=n("8c4f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view-app default"},[n("default-header",[n("default-menu-links"),t.userLogged?n("ul",{staticClass:"navbar-nav align-items-center ml-auto"},[n("li",{staticClass:"nav-item mr-3"},[n("small",[t._v("Welcome, "+t._s(t.userName))])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Logout")])])]):t._e()],1),n("div",{staticClass:"content"},[t._t("default")],2)],1)},l=[],u=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[n("div",{staticClass:"container"},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Navbar")]),t._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[t._t("default")],2)])])}),c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],f=n("2877"),d={},m=Object(f["a"])(d,u,c,!1,null,null,null),p=m.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v("About")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1)])},v=[],h={},b=Object(f["a"])(h,g,v,!1,null,null,null),_=b.exports,C={methods:{logout:function(){this.$root.user.logout()}},computed:{userName:function(){return this.$root.user.name},userLogged:function(){return!!this.$root.user.logged}},components:{defaultHeader:p,defaultMenuLinks:_}},y=C,x=Object(f["a"])(y,o,l,!1,null,null,null),k=x.exports,O=(n("ac6a"),n("ffc1"),n("a481"),n("bc3a")),j=n.n(O),E=n("b383"),w=n.n(E),S={api:"http://localhost:3333/api/"},L={getUrl:function(t){return S.api+t.replace(/^\//,"")},getConfig:function(t){return t||(t={}),t.headers=$.extend({},this.getHeaders(),t.headers),t},getHeaders:function(){return{}},get:function(t,e,n){return n=this.getConfig(n),t=this.getUrl(t),Object.entries(e||{}).length&&(t.indexOf("?")<0&&(t+="?"),t+=w.a.stringify(e)),j.a.get(t,n).then(function(t){return t.data}).catch(function(t){return t.response.data||{status:"failed",message:t.message}})},post:function(t,e,n){return t=this.getUrl(t),n=this.getConfig(n),j.a.post(t,e,n).then(function(t){return t.data}).catch(function(t){return t.response.data||{status:"failed",message:t.message}})},getTasks:function(){return this.get("tasks")},getUserByEmail:function(t){return this.get("users/by-email",{email:t})},createUser:function(t){return this.post("users/create",t)},sessionGet:function(){return this.post("session/get")},sessionSet:function(t){return this.post("session/set",t)},sessionClear:function(){return this.post("session/clear")}},P=new a["a"]({data:function(){return this.defaultData()},methods:{defaultData:function(){return{_id:!1,email:null,name:null,created_at:null,deleted:null,logged:!1}},login:function(t,e){Object.assign(this,t,{logged:!0}),e&&L.sessionSet({user:t})},logout:function(){Object.assign(this,{logged:!1},this.defaultData())}}}),N=n("75fc"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-main-home"},[n("default-layout",[n("div",{staticClass:"container"},[n("h1",[t._v("Home")]),n("div",{staticClass:"tasks"},t._l(t.tasks,function(e){return n("div",{key:e._id},[n("span",[t._v(t._s(e.text||"(No Text)"))])])}),0)])])],1)},U=[],D={name:"page-main-home",data:function(){return{tasks:[]}},mounted:function(){var t=this;L.getTasks().then(function(e,n){t.tasks=e})},components:{defaultLayout:k}},H=D,M=Object(f["a"])(H,T,U,!1,null,null,null),A=M.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-main-home"},[n("default-layout",[n("div",{staticClass:"container"},[n("h1",[t._v("About")])])])],1)},G=[],J={name:"page-main-home",components:{defaultLayout:k}},q=J,I=Object(f["a"])(q,B,G,!1,null,null,null),W=I.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-main-home"},[n("default-layout",[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 mx-auto"},[n("h1",[t._v("Login")]),t.success.length?n("div",{staticClass:"alert alert-success"},[t._v("\n                "+t._s(t.success)+"\n              ")]):t._e(),t.error.length?n("div",{staticClass:"alert alert-danger"},[t._v("\n                "+t._s(t.error)+"\n              ")]):t._e(),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"form-group"},[n("label",[t._v("Username/Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t.email&&!1===t.accountExists?n("div",{staticClass:"form-group"},[n("label",[t._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]):t._e(),n("div",{staticClass:"form-group"},[null===t.accountExists?n("div",[n("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:t.submitting}},[t._v("Next")])]):t._e(),!1===t.accountExists?n("div",[n("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:t.submitting}},[t._v("Create Account & Sign In")])]):t._e()])])])])])])],1)},F=[],K={name:"page-main-login",data:function(){return{email:"",name:"",error:"",success:"",accountExists:null,submitting:!1}},mounted:function(){},methods:{onSubmit:function(){var t=this;if(this.error="",this.success="",this.email||(this.error="Email is required"),null===this.accountExists){if(this.error.length)return!1;L.getUserByEmail(this.email).then(function(e){e.user?t.login(e.user):t.accountExists=!1}).catch(function(e){t.error="Could not perform login."})}else{if(this.name.length||(this.error="Please choose a name"),this.error.length)return!1;L.createUser({email:this.email,name:this.name}).then(function(e){t.login(e.user)})}},login:function(t){var e=this;this.$root.user.login(t,!0),this.success="Login successful!",setTimeout(function(){e.$router.push("/")},1500)}},components:{defaultLayout:k}},Q=K,R=Object(f["a"])(Q,z,F,!1,null,null,null),V=R.exports,X=[{path:"/",component:A},{path:"/about",component:W},{path:"/login",component:V}],Y=new s["a"]({routes:Object(N["a"])(X)}),Z=Y,tt={name:"app",router:Z,mounted:function(){var t=this;L.sessionGet().then(function(e){var n=e.session;n.user&&t.user.login(n.user)})},data:function(){return{user:P}},components:{defaultLayout:k}},et=tt,nt=Object(f["a"])(et,r,i,!1,null,null,null),at=nt.exports;a["a"].use(s["a"]),a["a"].config.productionTip=!1;new a["a"](at).$mount("#app")}});
//# sourceMappingURL=app.js.map